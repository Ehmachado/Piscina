<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dashboard de Metas - Tanque Fuel</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    body{
      font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;
      background:transparent;
      min-height:100vh;
      padding:30px;
    }
    .container{max-width:1800px;margin:0 auto}
    
    .controls{
      background:#ffffff;
      padding:50px;
      border-radius:35px;
      box-shadow:0 25px 70px rgba(0,0,0,.18);
      margin-bottom:60px;
      border:3px solid #e5e7eb;
    }
    
    h1{
      margin-bottom:40px;
      color:#1a1a2e;
      font-size:48px;
      font-weight:900;
      text-align:center;
      text-transform:uppercase;
      letter-spacing:4px;
      background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
    }
    
    .palette-selector{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(240px,1fr));
      gap:25px;
      margin-bottom:40px;
    }
    
    .palette-btn{
      padding:30px;
      border:5px solid transparent;
      border-radius:20px;
      cursor:pointer;
      font-size:19px;
      font-weight:900;
      transition:.3s;
      position:relative;
      overflow:hidden;
      color:#fff;
      text-shadow:0 3px 8px rgba(0,0,0,.5);
    }
    
    .palette-btn.active{
      transform:scale(1.1);
      box-shadow:0 18px 50px rgba(0,0,0,.6);
      border-color:rgba(255,255,255,.95);
    }
    
    .palette-royal{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%)}
    .palette-gold{background:linear-gradient(135deg,#f7971e 0%,#ffd200 100%)}
    .palette-emerald{background:linear-gradient(135deg,#11998e 0%,#38ef7d 100%)}
    .palette-sunset{background:linear-gradient(135deg,#fa709a 0%,#fee140 100%)}
    .palette-ocean{background:linear-gradient(135deg,#2e3192 0%,#1bffff 100%)}
    
    .input-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(420px,1fr));
      gap:35px;
      margin-top:35px;
    }
    
    .input-group{
      background:linear-gradient(135deg,#f8f9fa 0%,#e9ecef 100%);
      padding:35px;
      border-radius:24px;
      border:4px solid #dee2e6;
      transition:.3s;
      box-shadow:0 12px 35px rgba(0,0,0,.1);
    }
    
    .input-group h3{
      margin-bottom:24px;
      color:#2c3e50;
      font-size:24px;
      text-transform:uppercase;
      letter-spacing:2.5px;
      font-weight:900;
    }
    
    .input-row{
      display:flex;
      flex-direction:column;
      gap:14px;
      margin-bottom:20px;
    }
    
    label{
      font-size:16px;
      color:#555;
      font-weight:800;
      text-transform:uppercase;
      letter-spacing:1px;
    }
    
    input{
      padding:18px;
      border:4px solid #ddd;
      border-radius:14px;
      font-size:22px;
      font-weight:700;
      transition:.3s;
      background:#fff;
    }
    
    input:focus{
      outline:none;
      border-color:#667eea;
      box-shadow:0 0 0 6px rgba(102,126,234,.25);
    }
    
    .input-subgroup{
      background:#ffffffdd;
      padding:22px;
      border-radius:16px;
      margin-bottom:20px;
      border:4px dashed #adb5bd;
    }
    
    .input-subgroup h4{
      font-size:17px;
      color:#495057;
      margin-bottom:16px;
      font-weight:900;
    }
    
    .dashboard{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(650px,1fr));
      gap:60px;
    }
    
    .card{
      border-radius:30px;
      padding:25px;
      box-shadow:0 35px 90px rgba(0,0,0,.4);
      position:relative;
      overflow:visible;
      transition:.4s;
      max-width:650px;
      width:650px;
      height:1050px;
    }
    
    .card:hover{
      transform:translateY(-15px);
      box-shadow:0 45px 110px rgba(0,0,0,.55);
    }
    
    /* Cores de fundo suaves por tema */
    .card.royal{
      border:25px solid #667eea;
      background:linear-gradient(135deg, #f0f3ff 0%, #e8edff 100%);
    }
    .card.gold{
      border:25px solid #f7971e;
      background:linear-gradient(135deg, #fff9e6 0%, #fff3d6 100%);
    }
    .card.emerald{
      border:25px solid #11998e;
      background:linear-gradient(135deg, #e6fff9 0%, #d6ffef 100%);
    }
    .card.sunset{
      border:25px solid #fa709a;
      background:linear-gradient(135deg, #fff0f5 0%, #ffe8f0 100%);
    }
    .card.ocean{
      border:25px solid #2e3192;
      background:linear-gradient(135deg, #e8f4ff 0%, #d6ecff 100%);
    }
    
    .card-inner{
      border-radius:24px;
      padding:28px;
      position:relative;
      background:transparent;
    }
    
    .card-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:10px;
    }
    
    .card-title{
      font-size:38px;
      font-weight:900;
      color:#2c3e50;
      display:flex;
      align-items:center;
      gap:15px;
      text-transform:uppercase;
      letter-spacing:2px;
    }
    
    .export-btn{
      background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
      color:#fff;
      border:none;
      padding:12px 24px;
      border-radius:12px;
      cursor:pointer;
      font-size:14px;
      font-weight:900;
      transition:.3s;
      box-shadow:0 10px 30px rgba(102,126,234,.6);
      text-transform:uppercase;
      letter-spacing:1px;
    }
    
    .export-btn:hover{
      transform:translateY(-5px);
      box-shadow:0 15px 40px rgba(102,126,234,.8);
    }
    
    .percent-chip{
      display:inline-flex;
      align-items:center;
      gap:12px;
      padding:14px 22px;
      border-radius:999px;
      font-weight:900;
      letter-spacing:1px;
      font-size:18px;
      margin-bottom:6px;
      background:#eef2ff;
      color:#111827;
      border:4px solid #e5e7eb;
      box-shadow:0 6px 18px rgba(0,0,0,.15);
    }
    
    .percent-chip span{
      display:inline-block;
      font-weight:900;
      color:#111827;
      font-size:18px;
    }
    
    .progress-bar-container{
      width:100%;
      height:45px;
      background:linear-gradient(135deg,#e9ecef 0%,#dee2e6 100%);
      border-radius:30px;
      overflow:hidden;
      position:relative;
      margin:6px 0 8px;
      border:4px solid rgba(0,0,0,.08);
      box-shadow:inset 0 4px 12px rgba(0,0,0,.2);
    }
    
    .progress-bar{
      height:100%;
      border-radius:35px;
      transition:width 1.8s cubic-bezier(.65,0,.35,1), background 0.5s ease;
      display:flex;
      align-items:center;
      justify-content:flex-end;
      padding-right:28px;
      position:relative;
      overflow:hidden;
      background-size:200% 100%;
      animation:shimmer 2.5s infinite;
    }
    
    /* Cores din√¢micas da barra de progresso com gradiente progressivo */
    .progress-bar.danger{background:linear-gradient(90deg,#dc3545 0%,#c82333 50%,#dc3545 100%);box-shadow:0 0 35px rgba(220,53,69,.8)}
    .progress-bar.warning{background:linear-gradient(90deg,#ffc107 0%,#e0a800 50%,#ffc107 100%);box-shadow:0 0 35px rgba(255,193,7,.8)}
    .progress-bar.success{background:linear-gradient(90deg,#28a745 0%,#218838 50%,#28a745 100%);box-shadow:0 0 35px rgba(40,167,69,.8)}
    .progress-bar.approaching{background:linear-gradient(90deg,#fd7e14 0%,#e8590c 50%,#fd7e14 100%);box-shadow:0 0 35px rgba(253,126,20,.8)}
    
    @keyframes shimmer{
      0%{background-position:0% 0%}
      50%{background-position:100% 0%}
      100%{background-position:0% 0%}
    }
    
    .progress-text{
      color:#fff;
      font-weight:900;
      font-size:17px;
      text-shadow:0 3px 6px rgba(0,0,0,.5);
      z-index:1;
    }
    
    .values{
      display:flex;
      justify-content:space-around;
      margin:8px 0;
      padding:20px;
      background:linear-gradient(135deg,#f8f9fa 0%,#e9ecef 100%);
      border-radius:16px;
      border:3px solid #dee2e6;
      box-shadow:0 5px 16px rgba(0,0,0,.1);
    }
    
    .value-item{text-align:center}
    
    .value-label{
      color:#666;
      font-size:12px;
      margin-bottom:8px;
      text-transform:uppercase;
      letter-spacing:2px;
      font-weight:900;
    }
    
    .value-amount{
      font-weight:900;
      font-size:26px;
      color:#2c3e50;
      text-shadow:0 2px 4px rgba(0,0,0,.1);
    }
    
    .breakdown{
      display:flex;
      gap:16px;
      margin:6px 0 4px;
      padding:16px;
      background:rgba(0,0,0,.05);
      border-radius:14px;
    }
    
    .breakdown-item{
      flex:1;
      text-align:center;
      padding:16px;
      background:#fff;
      border-radius:12px;
      border:3px solid #e9ecef;
      box-shadow:0 2px 8px rgba(0,0,0,.06);
    }
    
    .breakdown-label{
      font-size:11px;
      color:#6c757d;
      text-transform:uppercase;
      letter-spacing:1px;
      font-weight:900;
      margin-bottom:8px;
    }
    
    .breakdown-value{
      font-size:21px;
      font-weight:900;
      color:#2c3e50;
    }
    
    /* Novo campo FALTA */
    .falta-container{
      margin:6px 0;
      padding:16px 22px;
      background:linear-gradient(135deg,#dc3545 0%,#c82333 100%);
      border-radius:16px;
      border:4px solid #bd2130;
      box-shadow:0 6px 20px rgba(220,53,69,.35);
      text-align:center;
    }
    
    .falta-label{
      font-size:13px;
      color:#fff;
      font-weight:900;
      text-transform:uppercase;
      letter-spacing:2px;
      margin-bottom:6px;
      text-shadow:0 2px 4px rgba(0,0,0,.3);
    }
    
    .falta-value{
      font-size:28px;
      font-weight:900;
      color:#fff;
      text-shadow:0 3px 6px rgba(0,0,0,.4);
    }
    
    .percent-badge{
      position:absolute;
      top:18px;
      right:18px;
      display:flex;
      align-items:center;
      justify-content:center;
      flex-direction:column;
      width:100px;
      height:100px;
      border-radius:50%;
      background:#ffffffee;
      box-shadow:0 15px 50px rgba(0,0,0,.3), inset 0 0 0 8px #ffffff;
      font-weight:900;
      font-size:26px;
      color:#111827;
      text-shadow:0 2px 5px rgba(255,255,255,.9);
      border:4px solid #e5e7eb;
    }
    
    .percent-badge small{
      display:block;
      font-size:11px;
      letter-spacing:0.5px;
      color:#6b7280;
      margin-top:4px;
      font-weight:900;
    }
    
    .speedometer{
      display:flex;
      align-items:center;
      gap:15px;
      padding:18px 26px;
      background:linear-gradient(135deg,#f8f9fa 0%,#e9ecef 100%);
      border-radius:16px;
      border:4px solid #dee2e6;
      margin:8px 0;
      box-shadow:0 6px 18px rgba(0,0,0,.12);
    }
    
    .speedometer-icon{font-size:36px}
    
    .speedometer-content{flex:1}
    
    .speedometer-label{
      font-size:12px;
      color:#666;
      font-weight:900;
      text-transform:uppercase;
      letter-spacing:1.5px;
      margin-bottom:6px;
    }
    
    .speedometer-value{
      font-size:22px;
      font-weight:900;
      color:#2c3e50;
    }
    
    .speedometer-status{
      display:inline-block;
      padding:6px 16px;
      border-radius:20px;
      font-size:11px;
      font-weight:900;
      margin-top:8px;
      text-transform:uppercase;
      letter-spacing:0.8px;
    }
    
    .speedometer-status.ahead{background:#d4edda;color:#155724;border:4px solid #28a745}
    .speedometer-status.ontrack{background:#fff3cd;color:#856404;border:4px solid #ffc107}
    .speedometer-status.behind{background:#f8d7da;color:#721c24;border:4px solid #dc3545}
    
    .fuel-scene{
      height:180px;
      display:flex;
      align-items:center;
      justify-content:center;
      position:relative;
      padding:6px;
    }
    
    .fuel-container{
      position:relative;
      width:120px;
      height:174px;
      animation:fuel-float 4s ease-in-out infinite;
    }
    
    @keyframes fuel-float{
      0%,100%{transform:translateY(0px)}
      50%{transform:translateY(-6px)}
    }
    
    .fuel-tank{
      width:120px;
      height:174px;
      background:linear-gradient(145deg,#e2e8f0 0%,#cbd5e1 50%,#94a3b8 100%);
      border-radius:16px;
      position:relative;
      border:4px solid #64748b;
      overflow:hidden;
      box-shadow:0 20px 50px rgba(0,0,0,.4),inset 0 0 40px rgba(255,255,255,.25);
    }
    
    .fuel-label{
      position:absolute;
      top:50%;
      left:50%;
      transform:translate(-50%,-50%);
      font-size:22px;
      font-weight:900;
      color:#334155;
      letter-spacing:5px;
      z-index:10;
      text-shadow:0 0 15px rgba(255,255,255,.98),0 3px 5px rgba(0,0,0,.4);
    }
    
    .fuel-frame{
      position:absolute;
      top:10px;
      left:10px;
      right:10px;
      bottom:10px;
      border:2px solid rgba(255,255,255,.4);
      border-radius:12px;
      box-shadow:inset 0 0 25px rgba(0,0,0,.18);
    }
    
    .level-marks{
      position:absolute;
      left:8px;
      top:20px;
      bottom:20px;
      width:14px;
      display:flex;
      flex-direction:column;
      justify-content:space-between;
      z-index:5;
    }
    
    .level-mark{
      width:100%;
      height:2px;
      background:#1e293b;
      border-radius:2px;
      position:relative;
      box-shadow:0 1px 2px rgba(0,0,0,.3);
    }
    
    .level-mark::after{
      content:'';
      position:absolute;
      right:-6px;
      top:50%;
      transform:translateY(-50%);
      width:20px;
      height:2px;
      background:#1e293b;
      border-radius:2px;
      box-shadow:0 1px 2px rgba(0,0,0,.3);
    }
    
    .money-fill{
      position:absolute;
      bottom:0;
      left:0;
      right:0;
      background:linear-gradient(180deg,
        rgba(244,208,63,.95) 0%,
        rgba(243,156,18,1) 30%,
        rgba(214,137,16,1) 70%,
        #d68910 100%
      );
      transition:height 1.8s cubic-bezier(.4,0,.2,1);
      overflow:hidden;
      border-radius:0 0 16px 16px;
    }
    
    .coins-layer{
      position:absolute;
      width:100%;
      height:100%;
      background-image:
        radial-gradient(circle at 15% 88%,#f4d03f 0%,transparent 8%),
        radial-gradient(circle at 30% 82%,#f39c12 0%,transparent 8%),
        radial-gradient(circle at 45% 90%,#f4d03f 0%,transparent 8%),
        radial-gradient(circle at 60% 85%,#f39c12 0%,transparent 8%),
        radial-gradient(circle at 75% 87%,#f4d03f 0%,transparent 8%),
        radial-gradient(circle at 88% 83%,#f39c12 0%,transparent 8%),
        radial-gradient(circle at 12% 68%,#f39c12 0%,transparent 7%),
        radial-gradient(circle at 35% 65%,#f4d03f 0%,transparent 7%),
        radial-gradient(circle at 55% 70%,#f39c12 0%,transparent 7%),
        radial-gradient(circle at 72% 67%,#f4d03f 0%,transparent 7%),
        radial-gradient(circle at 90% 65%,#f39c12 0%,transparent 7%);
      animation:coins-shimmer 3s ease-in-out infinite;
    }
    
    @keyframes coins-shimmer{
      0%,100%{opacity:.92}
      50%{opacity:1}
    }
    
    .bills-layer{
      position:absolute;
      width:100%;
      height:100%;
    }
    
    .bill{
      position:absolute;
      width:32px;
      height:16px;
      border-radius:2px;
      background:linear-gradient(135deg,#27ae60 0%,#229954 100%);
      border:2px solid #1e8449;
      box-shadow:0 3px 8px rgba(0,0,0,.35);
      animation:bill-float 6s ease-in-out infinite;
    }
    
    .bill::before{
      content:'$';
      position:absolute;
      top:50%;
      left:50%;
      transform:translate(-50%,-50%);
      font-size:11px;
      font-weight:900;
      color:#f4d03f;
      text-shadow:0 1px 3px rgba(0,0,0,.35);
    }
    
    .bill:nth-child(1){left:15%;bottom:35%;animation-delay:0s}
    .bill:nth-child(2){left:40%;bottom:55%;animation-delay:1.2s}
    .bill:nth-child(3){left:65%;bottom:25%;animation-delay:.6s}
    .bill:nth-child(4){left:80%;bottom:45%;animation-delay:1.8s}
    
    @keyframes bill-float{
      0%,100%{transform:translateY(0) rotate(0deg)}
      25%{transform:translateY(-10px) rotate(5deg)}
      50%{transform:translateY(0) rotate(0deg)}
      75%{transform:translateY(-10px) rotate(-5deg)}
    }
    
    .money-surface{
      position:absolute;
      top:-6px;
      left:0;
      right:0;
      height:12px;
      background:linear-gradient(90deg,
        rgba(255,255,255,.45) 0%,
        rgba(255,255,255,.65) 50%,
        rgba(255,255,255,.45) 100%
      );
      border-radius:50%;
      animation:surface-ripple 3s ease-in-out infinite;
    }
    
    @keyframes surface-ripple{
      0%,100%{transform:scaleX(1) translateY(0)}
      50%{transform:scaleX(1.05) translateY(-4px)}
    }
    
    .money-shine{
      position:absolute;
      top:-120%;
      left:-60%;
      width:220%;
      height:220%;
      background:linear-gradient(135deg,
        transparent 0%,
        rgba(255,255,255,.35) 46%,
        rgba(255,255,255,.55) 50%,
        rgba(255,255,255,.35) 54%,
        transparent 100%
      );
      animation:shine-move 5s infinite;
    }
    
    @keyframes shine-move{
      0%{transform:translate(-100%,-100%)}
      100%{transform:translate(120%,120%)}
    }
    
    .money-glow{
      position:absolute;
      width:100%;
      height:100%;
      background:radial-gradient(ellipse at center bottom,
        rgba(244,208,63,.7) 0%,
        rgba(243,156,18,.45) 50%,
        transparent 80%
      );
      animation:glow-pulse 3.5s ease-in-out infinite;
    }
    
    @keyframes glow-pulse{
      0%,100%{opacity:.7}
      50%{opacity:1}
    }
    
    .status-badge{
      display:inline-block;
      padding:12px 28px;
      border-radius:32px;
      font-size:15px;
      font-weight:900;
      margin-top:6px;
      text-transform:uppercase;
      letter-spacing:2px;
      box-shadow:0 8px 24px rgba(0,0,0,.24);
    }
    
    .status-success{background:linear-gradient(135deg,#d4edda 0%,#b8e0c5 100%);color:#155724;border:5px solid #28a745}
    .status-warning{background:linear-gradient(135deg,#fff3cd 0%,#ffeaa7 100%);color:#856404;border:5px solid #ffc107}
    .status-danger{background:linear-gradient(135deg,#f8d7da 0%,#f5c6cb 100%);color:#721c24;border:5px solid #dc3545}
    
    @media (max-width:768px){
      .dashboard{grid-template-columns:1fr}
      .palette-selector{grid-template-columns:1fr}
      .input-grid{grid-template-columns:1fr}
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="controls">
      <h1>‚õΩ Tanque Fuel</h1>
      
      <div style="text-align:center;margin-bottom:35px;">
        <p style="font-size:20px;color:#666;font-weight:800">Escolha a paleta de cores para seus cards:</p>
      </div>
      
      <div class="palette-selector">
        <button class="palette-btn palette-royal active" onclick="changePalette('royal')">üëë Royal Purple</button>
        <button class="palette-btn palette-gold" onclick="changePalette('gold')">üåü Golden Hour</button>
        <button class="palette-btn palette-emerald" onclick="changePalette('emerald')">üíé Emerald Dream</button>
        <button class="palette-btn palette-sunset" onclick="changePalette('sunset')">üåÖ Sunset Vibes</button>
        <button class="palette-btn palette-ocean" onclick="changePalette('ocean')">üåä Ocean Blue</button>
      </div>
      
      <div class="input-grid">
        <div class="input-group">
          <h3>üë§ Cr√©dito PF Total</h3>
          <div class="input-row">
            <label>Meta Total PF (R$)</label>
            <input type="number" id="meta-pf" value="180000" oninput="updateDashboard()">
          </div>
          <div class="input-subgroup">
            <h4>üí≥ Consignado</h4>
            <div class="input-row">
              <label>Realizado (R$)</label>
              <input type="number" id="realizado-consignado" value="75000" oninput="updateDashboard()">
            </div>
          </div>
          <div class="input-subgroup">
            <h4>üí∞ N√£o Consignado</h4>
            <div class="input-row">
              <label>Realizado (R$)</label>
              <input type="number" id="realizado-nao-consignado" value="92000" oninput="updateDashboard()">
            </div>
          </div>
        </div>
        
        <div class="input-group">
          <h3>üè¢ Cr√©dito PJ</h3>
          <div class="input-row">
            <label>Meta PJ (R$)</label>
            <input type="number" id="meta-pj" value="150000" oninput="updateDashboard()">
          </div>
          <div class="input-subgroup">
            <h4>üìà Desembolso Giro</h4>
            <div class="input-row">
              <label>Realizado (R$)</label>
              <input type="number" id="desembolso-giro" value="80000" oninput="updateDashboard()">
            </div>
          </div>
          <div class="input-subgroup">
            <h4>üìä Desembolso Receb√≠veis</h4>
            <div class="input-row">
              <label>Realizado (R$)</label>
              <input type="number" id="desembolso-recebiveis" value="55000" oninput="updateDashboard()">
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="dashboard">
      <!-- CARD PF -->
      <div class="card royal" id="card-pf">
        <div class="percent-badge" id="badge-pf">0%<small>Ating.</small></div>
        <div class="card-inner">
          <div class="card-header">
            <div class="card-title"><span>üë§</span><span>Cr√©dito PF</span></div>
            <button class="export-btn" onclick="exportCard('card-pf','Credito_PF')">üì∏ Exportar</button>
          </div>
          
          <div class="percent-chip" id="chip-pf">Atingimento: <span style="margin-left:10px" id="chip-value-pf">0%</span></div>
          
          <div class="progress-bar-container">
            <div class="progress-bar danger" id="progress-pf" style="width:0%">
              <span class="progress-text" id="progress-text-pf">0%</span>
            </div>
          </div>
          
          <!-- Campo FALTA -->
          <div class="falta-container" id="falta-pf">
            <div class="falta-label">üéØ FALTA</div>
            <div class="falta-value" id="falta-value-pf">R$ 0</div>
          </div>
          
          <div class="speedometer" id="speedometer-pf">
            <div class="speedometer-icon">üèÉ</div>
            <div class="speedometer-content">
              <div class="speedometer-label">Velocidade Esperada</div>
              <div class="speedometer-value" id="speed-value-pf">R$ 0 (0%)</div>
              <div class="speedometer-status ontrack" id="speed-status-pf">No Ritmo</div>
            </div>
          </div>
          
          <div class="values">
            <div class="value-item">
              <div class="value-label">Meta PF</div>
              <div class="value-amount" id="meta-display-pf">R$ 0</div>
            </div>
            <div class="value-item">
              <div class="value-label">Realizado</div>
              <div class="value-amount" id="realizado-total-pf">R$ 0</div>
            </div>
          </div>
          
          <div class="breakdown">
            <div class="breakdown-item">
              <div class="breakdown-label">üí≥ Consignado</div>
              <div class="breakdown-value" id="breakdown-consignado">R$ 0</div>
            </div>
            <div class="breakdown-item">
              <div class="breakdown-label">üí∞ N√£o Consig.</div>
              <div class="breakdown-value" id="breakdown-nao-consignado">R$ 0</div>
            </div>
          </div>
          
          <div class="fuel-scene">
            <div class="fuel-container">
              <div class="fuel-tank">
                <div class="fuel-frame"></div>
                <div class="fuel-label">FUEL</div>
                <div class="level-marks">
                  <div class="level-mark"></div>
                  <div class="level-mark"></div>
                  <div class="level-mark"></div>
                  <div class="level-mark"></div>
                  <div class="level-mark"></div>
                </div>
                <div class="money-fill" id="fuel-pf" style="height:0%">
                  <div class="coins-layer"></div>
                  <div class="bills-layer">
                    <div class="bill"></div>
                    <div class="bill"></div>
                    <div class="bill"></div>
                    <div class="bill"></div>
                  </div>
                  <div class="money-surface"></div>
                  <div class="money-shine"></div>
                  <div class="money-glow"></div>
                </div>
              </div>
            </div>
          </div>
          
          <div class="status-badge status-danger" id="status-pf">‚Äî</div>
        </div>
      </div>
      
      <!-- CARD PJ -->
      <div class="card royal" id="card-pj">
        <div class="percent-badge" id="badge-pj">0%<small>Ating.</small></div>
        <div class="card-inner">
          <div class="card-header">
            <div class="card-title"><span>üè¢</span><span>Cr√©dito PJ</span></div>
            <button class="export-btn" onclick="exportCard('card-pj','Credito_PJ')">üì∏ Exportar</button>
          </div>
          
          <div class="percent-chip" id="chip-pj">Atingimento: <span style="margin-left:10px" id="chip-value-pj">0%</span></div>
          
          <div class="progress-bar-container">
            <div class="progress-bar danger" id="progress-pj" style="width:0%">
              <span class="progress-text" id="progress-text-pj">0%</span>
            </div>
          </div>
          
          <!-- Campo FALTA -->
          <div class="falta-container" id="falta-pj">
            <div class="falta-label">üéØ FALTA</div>
            <div class="falta-value" id="falta-value-pj">R$ 0</div>
          </div>
          
          <div class="speedometer" id="speedometer-pj">
            <div class="speedometer-icon">üèÉ</div>
            <div class="speedometer-content">
              <div class="speedometer-label">Velocidade Esperada</div>
              <div class="speedometer-value" id="speed-value-pj">R$ 0 (0%)</div>
              <div class="speedometer-status ontrack" id="speed-status-pj">No Ritmo</div>
            </div>
          </div>
          
          <div class="values">
            <div class="value-item">
              <div class="value-label">Meta PJ</div>
              <div class="value-amount" id="meta-display-pj">R$ 0</div>
            </div>
            <div class="value-item">
              <div class="value-label">Realizado</div>
              <div class="value-amount" id="realizado-total-pj">R$ 0</div>
            </div>
          </div>
          
          <div class="breakdown">
            <div class="breakdown-item">
              <div class="breakdown-label">üìà Desemb. Giro</div>
              <div class="breakdown-value" id="breakdown-giro">R$ 0</div>
            </div>
            <div class="breakdown-item">
              <div class="breakdown-label">üìä Desemb. Receb.</div>
              <div class="breakdown-value" id="breakdown-recebiveis">R$ 0</div>
            </div>
          </div>
          
          <div class="fuel-scene">
            <div class="fuel-container">
              <div class="fuel-tank">
                <div class="fuel-frame"></div>
                <div class="fuel-label">FUEL</div>
                <div class="level-marks">
                  <div class="level-mark"></div>
                  <div class="level-mark"></div>
                  <div class="level-mark"></div>
                  <div class="level-mark"></div>
                  <div class="level-mark"></div>
                </div>
                <div class="money-fill" id="fuel-pj" style="height:0%">
                  <div class="coins-layer"></div>
                  <div class="bills-layer">
                    <div class="bill"></div>
                    <div class="bill"></div>
                    <div class="bill"></div>
                    <div class="bill"></div>
                  </div>
                  <div class="money-surface"></div>
                  <div class="money-shine"></div>
                  <div class="money-glow"></div>
                </div>
              </div>
            </div>
          </div>
          
          <div class="status-badge status-danger" id="status-pj">‚Äî</div>
        </div>
      </div>
    </div>
  </div>
  
  <script>
    const themes = ['royal','gold','emerald','sunset','ocean'];
    
    function brMoney(n){
      if(isNaN(n) || n === Infinity || n === -Infinity) return 'R$ 0';
      return n.toLocaleString('pt-BR',{style:'currency',currency:'BRL',minimumFractionDigits:0,maximumFractionDigits:0});
    }
    
    function pct(n){ return `${(Math.max(0, n)).toFixed(1)}%`; }
    
    function setStatus(el, p){
      el.classList.remove('status-success','status-warning','status-danger');
      if(p >= 100) el.classList.add('status-success'), el.textContent = 'Meta batida!';
      else if(p >= 80) el.classList.add('status-warning'), el.textContent = 'Quase l√°';
      else el.classList.add('status-danger'), el.textContent = 'Aten√ß√£o';
    }
    
    function setProgressBarColor(el, p){
      el.classList.remove('danger','warning','success','approaching');
      if(p >= 100) {
        el.classList.add('success');
      } else if(p >= 90) {
        el.classList.add('approaching');
      } else if(p >= 70) {
        el.classList.add('warning');
      } else {
        el.classList.add('danger');
      }
    }
    
    function clampPercent(n){ return Math.max(0, Math.min(1000, n)); }
    
    function getExpectedPercent(){
      const now = new Date();
      const hour = now.getHours();
      const minute = now.getMinutes();
      const startHour = 8;
      const endHour = 18;
      const workHours = endHour - startHour;
      if(hour < startHour) return 0;
      if(hour >= endHour) return 100;
      const elapsedMinutes = (hour - startHour) * 60 + minute;
      const totalMinutes = workHours * 60;
      const expectedPercent = (elapsedMinutes / totalMinutes) * 100;
      return Math.min(expectedPercent, 100);
    }
    
    function updateSpeedometer(type, realized, meta){
      const expectedPercent = getExpectedPercent();
      const expectedValue = (meta * expectedPercent) / 100;
      const actualPercent = meta > 0 ? (realized / meta) * 100 : 0;
      const speedValueEl = document.getElementById(`speed-value-${type}`);
      const speedStatusEl = document.getElementById(`speed-status-${type}`);
      speedValueEl.textContent = `${brMoney(expectedValue)} (${expectedPercent.toFixed(1)}%)`;
      const difference = actualPercent - expectedPercent;
      speedStatusEl.classList.remove('ahead','ontrack','behind');
      if(difference >= 5){
        speedStatusEl.classList.add('ahead');
        speedStatusEl.textContent = 'üöÄ Acima do Esperado';
      } else if(difference >= -5){
        speedStatusEl.classList.add('ontrack');
        speedStatusEl.textContent = '‚úÖ No Ritmo';
      } else {
        speedStatusEl.classList.add('behind');
        speedStatusEl.textContent = '‚ö†Ô∏è Abaixo do Esperado';
      }
    }
    
    function updateDashboard(){
      const metaPF = parseFloat(document.getElementById('meta-pf').value)||0;
      const cons = parseFloat(document.getElementById('realizado-consignado').value)||0;
      const ncons = parseFloat(document.getElementById('realizado-nao-consignado').value)||0;
      const realPF = cons + ncons;
      const pPF = metaPF>0 ? clampPercent((realPF/metaPF)*100) : 0;
      const faltaPF = Math.max(0, metaPF - realPF);
      
      document.getElementById('meta-display-pf').textContent = brMoney(metaPF);
      document.getElementById('realizado-total-pf').textContent = brMoney(realPF);
      document.getElementById('breakdown-consignado').textContent = brMoney(cons);
      document.getElementById('breakdown-nao-consignado').textContent = brMoney(ncons);
      document.getElementById('falta-value-pf').textContent = brMoney(faltaPF);
      
      const progPF = document.getElementById('progress-pf');
      progPF.style.width = Math.min(pPF,100)+'%';
      setProgressBarColor(progPF, pPF);
      document.getElementById('progress-text-pf').textContent = pct(pPF);
      document.getElementById('chip-value-pf').textContent = pct(pPF);
      document.getElementById('badge-pf').innerHTML = `${(pPF).toFixed(0)}%<small>Ating.</small>`;
      document.getElementById('fuel-pf').style.height = Math.min(pPF,100)+'%';
      updateSpeedometer('pf', realPF, metaPF);
      setStatus(document.getElementById('status-pf'), pPF);
      
      const metaPJ = parseFloat(document.getElementById('meta-pj').value)||0;
      const giro = parseFloat(document.getElementById('desembolso-giro').value)||0;
      const rec = parseFloat(document.getElementById('desembolso-recebiveis').value)||0;
      const realPJ = giro + rec;
      const pPJ = metaPJ>0 ? clampPercent((realPJ/metaPJ)*100) : 0;
      const faltaPJ = Math.max(0, metaPJ - realPJ);
      
      document.getElementById('meta-display-pj').textContent = brMoney(metaPJ);
      document.getElementById('realizado-total-pj').textContent = brMoney(realPJ);
      document.getElementById('breakdown-giro').textContent = brMoney(giro);
      document.getElementById('breakdown-recebiveis').textContent = brMoney(rec);
      document.getElementById('falta-value-pj').textContent = brMoney(faltaPJ);
      
      const progPJ = document.getElementById('progress-pj');
      progPJ.style.width = Math.min(pPJ,100)+'%';
      setProgressBarColor(progPJ, pPJ);
      document.getElementById('progress-text-pj').textContent = pct(pPJ);
      document.getElementById('chip-value-pj').textContent = pct(pPJ);
      document.getElementById('badge-pj').innerHTML = `${(pPJ).toFixed(0)}%<small>Ating.</small>`;
      document.getElementById('fuel-pj').style.height = Math.min(pPJ,100)+'%';
      updateSpeedometer('pj', realPJ, metaPJ);
      setStatus(document.getElementById('status-pj'), pPJ);
    }
    
    function stripTheme(el){ themes.forEach(t=>el.classList.remove(t)); }
    
    function changePalette(theme){
      document.querySelectorAll('.palette-btn').forEach(b=>b.classList.remove('active'));
      const btn = Array.from(document.querySelectorAll('.palette-btn')).find(b=>b.className.includes(`palette-${theme}`));
      if(btn) btn.classList.add('active');
      document.querySelectorAll('.card').forEach(card=>{ stripTheme(card); card.classList.add(theme); });
    }
    
    async function exportCard(cardId, fileName){
      const node = document.getElementById(cardId);
      const button = node.querySelector('.export-btn');
      
      // Apenas ocultar o bot√£o de exportar, manter tudo mais vis√≠vel
      const originalButtonDisplay = button.style.display;
      button.style.display = 'none';
      
      // For√ßar repaint
      node.offsetHeight;
      
      // Aguardar para garantir que as mudan√ßas foram aplicadas
      await new Promise(resolve => setTimeout(resolve, 300));
      
      // Capturar o card completo
      const canvas = await html2canvas(node, {
        scale: 3,
        useCORS: true,
        allowTaint: true,
        logging: false,
        backgroundColor: null,
        imageTimeout: 0,
        removeContainer: true,
        foreignObjectRendering: true,
        ignoreElements: function(element) {
          return false;
        }
      });
      
      // Criar canvas final com fundo do card
      const finalCanvas = document.createElement('canvas');
      const ctx = finalCanvas.getContext('2d');
      finalCanvas.width = canvas.width;
      finalCanvas.height = canvas.height;
      
      // Obter a cor de fundo do card
      const computedStyle = window.getComputedStyle(node);
      const bgImage = computedStyle.backgroundImage;
      const bgColor = computedStyle.backgroundColor;
      
      // Aplicar o fundo do card
      if (bgImage && bgImage !== 'none') {
        // Tentar extrair as cores do gradiente
        const match = bgImage.match(/linear-gradient\([^)]+\)/);
        if (match) {
          const gradient = ctx.createLinearGradient(0, 0, finalCanvas.width, finalCanvas.height);
          // Fallback para cores aproximadas
          gradient.addColorStop(0, '#f0f3ff');
          gradient.addColorStop(1, '#e8edff');
          ctx.fillStyle = gradient;
        } else {
          ctx.fillStyle = bgColor || '#ffffff';
        }
      } else {
        ctx.fillStyle = bgColor || '#ffffff';
      }
      
      ctx.fillRect(0, 0, finalCanvas.width, finalCanvas.height);
      
      // Desenhar o card capturado
      ctx.drawImage(canvas, 0, 0);
      
      // Restaurar bot√£o
      button.style.display = originalButtonDisplay;
      
      // Download da imagem
      const url = finalCanvas.toDataURL('image/png', 1.0);
      const a = document.createElement('a');
      a.href = url;
      a.download = `${fileName}.png`;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
    }
    
    changePalette('royal');
    updateDashboard();
    setTimeout(updateDashboard, 200);
    setInterval(updateDashboard, 60000);
  </script>
</body>
</html>
