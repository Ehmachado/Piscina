<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dashboard de Metas - Tanque Fuel</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    :root{
      --bg1:#1e3c72; --bg2:#2a5298; --bg3:#7e22ce;
      --glass:#fffffffa; --ink:#1a1a2e; --muted:#666; --card-shadow:0 25px 70px rgba(0,0,0,.3);
      --chip-bg:#eef2ff; --chip-text:#111827; --good:#28a745; --warn:#ffc107; --bad:#dc3545;
    }
    body{
      font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;
      background:linear-gradient(135deg,var(--bg1) 0%,var(--bg2) 50%,var(--bg3) 100%);
      min-height:100vh; padding:20px;
    }
    .container{max-width:1400px;margin:0 auto}
    .controls{
      background:var(--glass); backdrop-filter:blur(10px);
      padding:35px;border-radius:25px;box-shadow:var(--card-shadow);margin-bottom:40px;
    }
    h1{
      margin-bottom:30px;color:#1a1a2e;font-size:36px;font-weight:900;text-align:center;text-transform:uppercase;letter-spacing:2px;
      background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
      -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;
    }
    .palette-selector{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;margin-bottom:30px}
    .palette-btn{
      padding:20px;border:3px solid transparent;border-radius:15px;cursor:pointer;font-size:15px;font-weight:700;transition:.3s;position:relative;overflow:hidden;color:#fff;text-shadow:0 2px 4px rgba(0,0,0,.3)
    }
    .palette-btn::before{content:'';position:absolute;inset:0;left:-100%;background:rgba(255,255,255,.2);transition:left .4s}
    .palette-btn:hover::before{left:100%}
    .palette-btn.active{transform:scale(1.05);box-shadow:0 10px 30px rgba(0,0,0,.4);border-color:rgba(255,255,255,.8)}
    .palette-royal{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%)}
    .palette-gold{background:linear-gradient(135deg,#f7971e 0%,#ffd200 100%)}
    .palette-emerald{background:linear-gradient(135deg,#11998e 0%,#38ef7d 100%)}
    .palette-sunset{background:linear-gradient(135deg,#fa709a 0%,#fee140 100%)}
    .palette-ocean{background:linear-gradient(135deg,#2e3192 0%,#1bffff 100%)}

    .input-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:25px;margin-top:25px}
    .input-group{background:linear-gradient(135deg,#f8f9fa 0%,#e9ecef 100%);padding:25px;border-radius:18px;border:3px solid #dee2e6;transition:.3s}
    .input-group:hover{transform:translateY(-5px);box-shadow:0 10px 25px rgba(0,0,0,.15)}
    .input-group h3{margin-bottom:18px;color:#2c3e50;font-size:18px;text-transform:uppercase;letter-spacing:1.5px;font-weight:800}
    .input-row{display:flex;flex-direction:column;gap:10px;margin-bottom:15px}
    label{font-size:13px;color:#555;font-weight:700;text-transform:uppercase;letter-spacing:.5px}
    input{padding:14px;border:3px solid #ddd;border-radius:10px;font-size:18px;font-weight:600;transition:.3s;background:#fff}
    input:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 4px rgba(102,126,234,.15);transform:scale(1.02)}
    .input-subgroup{background:#ffffffb3;padding:15px;border-radius:12px;margin-bottom:15px;border:2px dashed #adb5bd}
    .input-subgroup h4{font-size:14px;color:#495057;margin-bottom:12px;font-weight:700}

    .dashboard{display:grid;grid-template-columns:repeat(auto-fit,minmax(500px,1fr));gap:35px}
    .card{border-radius:25px;padding:35px;box-shadow:var(--card-shadow);position:relative;overflow:hidden;transition:.3s}
    .card:hover{transform:translateY(-10px);box-shadow:0 35px 90px rgba(0,0,0,.4)}
    .card.royal{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%)}
    .card.gold{background:linear-gradient(135deg,#f7971e 0%,#ffd200 100%)}
    .card.emerald{background:linear-gradient(135deg,#11998e 0%,#38ef7d 100%)}
    .card.sunset{background:linear-gradient(135deg,#fa709a 0%,#fee140 100%)}
    .card.ocean{background:linear-gradient(135deg,#2e3192 0%,#1bffff 100%)}

    .card-inner{border-radius:20px;padding:30px;position:relative;transition:background .3s}
    .card.royal .card-inner{background:rgba(102,126,234,.08)}
    .card.gold .card-inner{background:rgba(247,151,30,.08)}
    .card.emerald .card-inner{background:rgba(17,153,142,.08)}
    .card.sunset .card-inner{background:rgba(250,112,154,.08)}
    .card.ocean .card-inner{background:rgba(46,49,146,.08)}
    .card-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:25px}
    .card-title{font-size:24px;font-weight:900;color:#2c3e50;display:flex;align-items:center;gap:12px;text-transform:uppercase;letter-spacing:1px}
    .export-btn{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;border:none;padding:12px 24px;border-radius:10px;cursor:pointer;font-size:14px;font-weight:800;transition:.3s;box-shadow:0 6px 20px rgba(102,126,234,.4);text-transform:uppercase;letter-spacing:.5px}
    .export-btn:hover{transform:translateY(-3px);box-shadow:0 10px 30px rgba(102,126,234,.6)}

    .percent-chip{
      display:inline-flex;align-items:center;gap:10px;padding:10px 14px;border-radius:999px;
      font-weight:900;letter-spacing:.5px;font-size:14px;margin-bottom:12px;
      background:var(--chip-bg);color:var(--chip-text);border:2px solid #e5e7eb;
    }

    .progress-bar-container{width:100%;height:44px;background:linear-gradient(135deg,#e9ecef 0%,#dee2e6 100%);border-radius:25px;overflow:hidden;position:relative;margin:12px 0 18px;border:3px solid rgba(0,0,0,.05);box-shadow:inset 0 3px 8px rgba(0,0,0,.15)}
    .progress-bar{height:100%;border-radius:25px;transition:width 1.2s cubic-bezier(.65,0,.35,1);display:flex;align-items:center;justify-content:flex-end;padding-right:18px;position:relative;overflow:hidden;background-size:200% 100%;animation:shimmer 2.5s infinite}
    .progress-bar.royal{background:linear-gradient(90deg,#667eea 0%,#764ba2 50%,#667eea 100%);box-shadow:0 0 25px rgba(102,126,234,.6)}
    .progress-bar.gold{background:linear-gradient(90deg,#f7971e 0%,#ffd200 50%,#f7971e 100%);box-shadow:0 0 25px rgba(255,210,0,.6)}
    .progress-bar.emerald{background:linear-gradient(90deg,#11998e 0%,#38ef7d 50%,#11998e 100%);box-shadow:0 0 25px rgba(56,239,125,.6)}
    .progress-bar.sunset{background:linear-gradient(90deg,#fa709a 0%,#fee140 50%,#fa709a 100%);box-shadow:0 0 25px rgba(254,225,64,.6)}
    .progress-bar.ocean{background:linear-gradient(90deg,#2e3192 0%,#1bffff 50%,#2e3192 100%);box-shadow:0 0 25px rgba(27,255,255,.6)}
    @keyframes shimmer{0%{background-position:0% 0%}50%{background-position:100% 0%}100%{background-position:0% 0%}}
    .progress-text{color:#fff;font-weight:900;font-size:16px;text-shadow:0 2px 4px rgba(0,0,0,.3);z-index:1}
    .progress-glow{position:absolute;right:0;top:0;bottom:0;width:60px;background:linear-gradient(90deg,transparent,rgba(255,255,255,.5));animation:glow-move 1.8s ease-in-out infinite}
    @keyframes glow-move{0%,100%{opacity:.4}50%{opacity:1}}

    .values{display:flex;justify-content:space-around;margin:20px 0;padding:20px;background:linear-gradient(135deg,#f8f9fa 0%,#e9ecef 100%);border-radius:15px;border:2px solid #dee2e6}
    .value-item{text-align:center}
    .value-label{color:#666;font-size:13px;margin-bottom:8px;text-transform:uppercase;letter-spacing:1.5px;font-weight:700}
    .value-amount{font-weight:900;font-size:24px;color:#2c3e50;text-shadow:0 1px 2px rgba(0,0,0,.1)}
    .breakdown{display:flex;gap:15px;margin:12px 0 6px;padding:16px;background:rgba(0,0,0,.03);border-radius:12px}
    .breakdown-item{flex:1;text-align:center;padding:15px;background:#fff;border-radius:10px;border:2px solid #e9ecef}
    .breakdown-label{font-size:11px;color:#6c757d;text-transform:uppercase;letter-spacing:1px;font-weight:700;margin-bottom:8px}
    .breakdown-value{font-size:20px;font-weight:800;color:#2c3e50}

    .percent-badge{
      position:absolute;top:16px;right:16px;display:flex;align-items:center;justify-content:center;
      width:108px;height:108px;border-radius:50%;background:#ffffffee;
      box-shadow:0 12px 40px rgba(0,0,0,.25), inset 0 0 0 6px #ffffff;
      font-weight:900;font-size:24px;color:#111827;text-shadow:0 1px 0 rgba(255,255,255,.6);border:3px solid #e5e7eb;
    }
    .percent-badge small{display:block;font-size:11px;letter-spacing:.5px;color:#6b7280;margin-top:2px;font-weight:800}

    /* ====================== TANQUE FUEL RETANGULAR ====================== */
    .fuel-scene{height:380px;display:flex;align-items:center;justify-content:center;position:relative;padding:20px}
    .fuel-container{position:relative;width:200px;height:300px;animation:fuel-float 4s ease-in-out infinite}
    
    @keyframes fuel-float{
      0%,100%{transform:translateY(0px)}
      50%{transform:translateY(-10px)}
    }

    /* Corpo do tanque retangular */
    .fuel-tank{
      width:200px;height:300px;
      background:linear-gradient(145deg,#e2e8f0 0%,#cbd5e1 50%,#94a3b8 100%);
      border-radius:20px;position:relative;border:5px solid #64748b;overflow:hidden;
      box-shadow:0 30px 60px rgba(0,0,0,.4),inset 0 0 50px rgba(255,255,255,.2);
    }

    /* Label FUEL */
    .fuel-label{
      position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);
      font-size:32px;font-weight:900;color:#334155;
      letter-spacing:6px;z-index:10;
      text-shadow:0 0 20px rgba(255,255,255,.9),0 2px 4px rgba(0,0,0,.3);
    }

    /* Moldura interna */
    .fuel-frame{
      position:absolute;top:15px;left:15px;right:15px;bottom:15px;
      border:3px solid rgba(255,255,255,.3);border-radius:15px;
      box-shadow:inset 0 0 30px rgba(0,0,0,.15);
    }

    /* Marca√ß√µes de n√≠vel laterais */
    .level-marks{
      position:absolute;left:12px;top:30px;bottom:30px;width:20px;
      display:flex;flex-direction:column;justify-content:space-between;z-index:5;
    }
    .level-mark{
      width:100%;height:3px;background:#1e293b;border-radius:2px;
      position:relative;
    }
    .level-mark::after{
      content:'';position:absolute;right:-8px;top:50%;transform:translateY(-50%);
      width:28px;height:3px;background:#1e293b;border-radius:2px;
    }

    /* Dinheiro enchendo */
    .money-fill{
      position:absolute;bottom:0;left:0;right:0;
      background:linear-gradient(180deg,
        rgba(244,208,63,.95) 0%,
        rgba(243,156,18,1) 30%,
        rgba(214,137,16,1) 70%,
        #d68910 100%
      );
      transition:height 1.5s cubic-bezier(.4,0,.2,1);
      overflow:hidden;border-radius:0 0 20px 20px;
    }

    /* Moedas */
    .coins-layer{
      position:absolute;width:100%;height:100%;
      background-image:
        radial-gradient(circle at 15% 88%,#f4d03f 0%,transparent 8%),
        radial-gradient(circle at 30% 82%,#f39c12 0%,transparent 8%),
        radial-gradient(circle at 45% 90%,#f4d03f 0%,transparent 8%),
        radial-gradient(circle at 60% 85%,#f39c12 0%,transparent 8%),
        radial-gradient(circle at 75% 87%,#f4d03f 0%,transparent 8%),
        radial-gradient(circle at 88% 83%,#f39c12 0%,transparent 8%),
        radial-gradient(circle at 12% 68%,#f39c12 0%,transparent 7%),
        radial-gradient(circle at 35% 65%,#f4d03f 0%,transparent 7%),
        radial-gradient(circle at 55% 70%,#f39c12 0%,transparent 7%),
        radial-gradient(circle at 72% 67%,#f4d03f 0%,transparent 7%),
        radial-gradient(circle at 90% 65%,#f39c12 0%,transparent 7%),
        radial-gradient(circle at 18% 48%,#f4d03f 0%,transparent 6.5%),
        radial-gradient(circle at 40% 45%,#f39c12 0%,transparent 6.5%),
        radial-gradient(circle at 62% 50%,#f4d03f 0%,transparent 6.5%),
        radial-gradient(circle at 82% 47%,#f39c12 0%,transparent 6.5%),
        radial-gradient(circle at 25% 28%,#f39c12 0%,transparent 6%),
        radial-gradient(circle at 48% 25%,#f4d03f 0%,transparent 6%),
        radial-gradient(circle at 70% 30%,#f39c12 0%,transparent 6%),
        radial-gradient(circle at 85% 27%,#f4d03f 0%,transparent 6%);
      animation:coins-shimmer 3s ease-in-out infinite;
    }

    @keyframes coins-shimmer{
      0%,100%{opacity:.92}
      50%{opacity:1}
    }

    /* Notas */
    .bills-layer{position:absolute;width:100%;height:100%}
    .bill{
      position:absolute;width:50px;height:25px;border-radius:3px;
      background:linear-gradient(135deg,#27ae60 0%,#229954 100%);
      border:2px solid #1e8449;box-shadow:0 3px 8px rgba(0,0,0,.35);
      animation:bill-float 6s ease-in-out infinite;
    }
    .bill::before{
      content:'$';position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);
      font-size:16px;font-weight:900;color:#f4d03f;text-shadow:0 1px 2px rgba(0,0,0,.3);
    }
    .bill:nth-child(1){left:15%;bottom:35%;animation-delay:0s}
    .bill:nth-child(2){left:40%;bottom:55%;animation-delay:1.2s}
    .bill:nth-child(3){left:65%;bottom:25%;animation-delay:.6s}
    .bill:nth-child(4){left:80%;bottom:45%;animation-delay:1.8s}

    @keyframes bill-float{
      0%,100%{transform:translateY(0) rotate(0deg)}
      25%{transform:translateY(-8px) rotate(4deg)}
      50%{transform:translateY(0) rotate(0deg)}
      75%{transform:translateY(-8px) rotate(-4deg)}
    }

    /* Superf√≠cie */
    .money-surface{
      position:absolute;top:-5px;left:0;right:0;height:10px;
      background:linear-gradient(90deg,
        rgba(255,255,255,.35) 0%,
        rgba(255,255,255,.55) 50%,
        rgba(255,255,255,.35) 100%
      );
      border-radius:50%;animation:surface-ripple 3s ease-in-out infinite;
    }

    @keyframes surface-ripple{
      0%,100%{transform:scaleX(1) translateY(0)}
      50%{transform:scaleX(1.05) translateY(-3px)}
    }

    /* Brilho */
    .money-shine{
      position:absolute;top:-120%;left:-60%;width:220%;height:220%;
      background:linear-gradient(135deg,
        transparent 0%,
        rgba(255,255,255,.25) 46%,
        rgba(255,255,255,.45) 50%,
        rgba(255,255,255,.25) 54%,
        transparent 100%
      );
      animation:shine-move 5s infinite;
    }

    @keyframes shine-move{
      0%{transform:translate(-100%,-100%)}
      100%{transform:translate(120%,120%)}
    }

    /* Glow */
    .money-glow{
      position:absolute;width:100%;height:100%;
      background:radial-gradient(ellipse at center bottom,
        rgba(244,208,63,.6) 0%,
        rgba(243,156,18,.35) 50%,
        transparent 80%
      );
      animation:glow-pulse 3.5s ease-in-out infinite;
    }

    @keyframes glow-pulse{
      0%,100%{opacity:.7}
      50%{opacity:1}
    }

    .status-badge{display:inline-block;padding:12px 28px;border-radius:30px;font-size:15px;font-weight:800;margin-top:16px;text-transform:uppercase;letter-spacing:1.5px;box-shadow:0 6px 20px rgba(0,0,0,.2)}
    .status-success{background:linear-gradient(135deg,#d4edda 0%,#b8e0c5 100%);color:#155724;border:3px solid #28a745}
    .status-warning{background:linear-gradient(135deg,#fff3cd 0%,#ffeaa7 100%);color:#856404;border:3px solid #ffc107}
    .status-danger{background:linear-gradient(135deg,#f8d7da 0%,#f5c6cb 100%);color:#721c24;border:3px solid #dc3545}

    @media (max-width:768px){
      .dashboard{grid-template-columns:1fr}
      .palette-selector{grid-template-columns:1fr}
      .input-grid{grid-template-columns:1fr}
      .percent-badge{width:90px;height:90px;font-size:20px}
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="controls">
      <h1>‚õΩ Tanque Fuel</h1>

      <div style="text-align:center;margin-bottom:25px;">
        <p style="font-size:16px;color:#666;font-weight:600">Escolha a paleta de cores para seus cards:</p>
      </div>

      <div class="palette-selector">
        <button class="palette-btn palette-royal active" onclick="changePalette('royal')">üëë Royal Purple</button>
        <button class="palette-btn palette-gold"   onclick="changePalette('gold')">üåü Golden Hour</button>
        <button class="palette-btn palette-emerald"onclick="changePalette('emerald')">üíé Emerald Dream</button>
        <button class="palette-btn palette-sunset" onclick="changePalette('sunset')">üåÖ Sunset Vibes</button>
        <button class="palette-btn palette-ocean"  onclick="changePalette('ocean')">üåä Ocean Blue</button>
      </div>

      <div class="input-grid">
        <div class="input-group">
          <h3>üë§ Cr√©dito PF Total</h3>
          <div class="input-row">
            <label>Meta Total PF (R$)</label>
            <input type="number" id="meta-pf" value="180000" oninput="updateDashboard()">
          </div>
          <div class="input-subgroup">
            <h4>üí≥ Consignado</h4>
            <div class="input-row">
              <label>Realizado (R$)</label>
              <input type="number" id="realizado-consignado" value="75000" oninput="updateDashboard()">
            </div>
          </div>
          <div class="input-subgroup">
            <h4>üí∞ N√£o Consignado</h4>
            <div class="input-row">
              <label>Realizado (R$)</label>
              <input type="number" id="realizado-nao-consignado" value="92000" oninput="updateDashboard()">
            </div>
          </div>
        </div>

        <div class="input-group">
          <h3>üè¢ Cr√©dito PJ</h3>
          <div class="input-row">
            <label>Meta PJ (R$)</label>
            <input type="number" id="meta-pj" value="150000" oninput="updateDashboard()">
          </div>
          <div class="input-subgroup">
            <h4>üìà Desembolso Giro</h4>
            <div class="input-row">
              <label>Realizado (R$)</label>
              <input type="number" id="desembolso-giro" value="80000" oninput="updateDashboard()">
            </div>
          </div>
          <div class="input-subgroup">
            <h4>üìä Desembolso Receb√≠veis</h4>
            <div class="input-row">
              <label>Realizado (R$)</label>
              <input type="number" id="desembolso-recebiveis" value="55000" oninput="updateDashboard()">
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="dashboard">
      <!-- CARD PF -->
      <div class="card royal" id="card-pf">
        <div class="percent-badge" id="badge-pf">0%<small>Ating.</small></div>
        <div class="card-inner">
          <div class="card-header">
            <div class="card-title"><span>üë§</span><span>Cr√©dito PF</span></div>
            <button class="export-btn" onclick="exportCard('card-pf','Credito_PF')">üì∏ Exportar</button>
          </div>

          <div class="percent-chip" id="chip-pf">Atingimento PF: <span style="margin-left:6px" id="chip-value-pf">0%</span></div>

          <div class="progress-bar-container">
            <div class="progress-bar royal" id="progress-pf" style="width:0%">
              <div class="progress-glow"></div>
              <span class="progress-text" id="progress-text-pf">0%</span>
            </div>
          </div>

          <div class="values">
            <div class="value-item">
              <div class="value-label">Meta PF</div>
              <div class="value-amount" id="meta-display-pf">R$ 0</div>
            </div>
            <div class="value-item">
              <div class="value-label">Realizado Total</div>
              <div class="value-amount" id="realizado-total-pf">R$ 0</div>
            </div>
          </div>

          <div class="breakdown">
            <div class="breakdown-item">
              <div class="breakdown-label">üí≥ Consignado</div>
              <div class="breakdown-value" id="breakdown-consignado">R$ 0</div>
            </div>
            <div class="breakdown-item">
              <div class="breakdown-label">üí∞ N√£o Consignado</div>
              <div class="breakdown-value" id="breakdown-nao-consignado">R$ 0</div>
            </div>
          </div>

          <!-- Tanque PF -->
          <div class="fuel-scene">
            <div class="fuel-container">
              <div class="fuel-tank">
                <div class="fuel-frame"></div>
                <div class="fuel-label">FUEL</div>
                <div class="level-marks">
                  <div class="level-mark"></div>
                  <div class="level-mark"></div>
                  <div class="level-mark"></div>
                  <div class="level-mark"></div>
                  <div class="level-mark"></div>
                </div>
                <div class="money-fill" id="fuel-pf" style="height:0%">
                  <div class="coins-layer"></div>
                  <div class="bills-layer">
                    <div class="bill"></div>
                    <div class="bill"></div>
                    <div class="bill"></div>
                    <div class="bill"></div>
                  </div>
                  <div class="money-surface"></div>
                  <div class="money-shine"></div>
                  <div class="money-glow"></div>
                </div>
              </div>
            </div>
          </div>

          <div class="status-badge status-danger" id="status-pf">‚Äî</div>
        </div>
      </div>

      <!-- CARD PJ -->
      <div class="card royal" id="card-pj">
        <div class="percent-badge" id="badge-pj">0%<small>Ating.</small></div>
        <div class="card-inner">
          <div class="card-header">
            <div class="card-title"><span>üè¢</span><span>Cr√©dito PJ</span></div>
            <button class="export-btn" onclick="exportCard('card-pj','Credito_PJ')">üì∏ Exportar</button>
          </div>

          <div class="percent-chip" id="chip-pj">Atingimento PJ: <span style="margin-left:6px" id="chip-value-pj">0%</span></div>

          <div class="progress-bar-container">
            <div class="progress-bar royal" id="progress-pj" style="width:0%">
              <div class="progress-glow"></div>
              <span class="progress-text" id="progress-text-pj">0%</span>
            </div>
          </div>

          <div class="values">
            <div class="value-item">
              <div class="value-label">Meta PJ</div>
              <div class="value-amount" id="meta-display-pj">R$ 0</div>
            </div>
            <div class="value-item">
              <div class="value-label">Realizado Total</div>
              <div class="value-amount" id="realizado-total-pj">R$ 0</div>
            </div>
          </div>

          <div class="breakdown">
            <div class="breakdown-item">
              <div class="breakdown-label">üìà Desembolso Giro</div>
              <div class="breakdown-value" id="breakdown-giro">R$ 0</div>
            </div>
            <div class="breakdown-item">
              <div class="breakdown-label">üìä Desembolso Receb√≠veis</div>
              <div class="breakdown-value" id="breakdown-recebiveis">R$ 0</div>
            </div>
          </div>

          <!-- Tanque PJ -->
          <div class="fuel-scene">
            <div class="fuel-container">
              <div class="fuel-tank">
                <div class="fuel-frame"></div>
                <div class="fuel-label">FUEL</div>
                <div class="level-marks">
                  <div class="level-mark"></div>
                  <div class="level-mark"></div>
                  <div class="level-mark"></div>
                  <div class="level-mark"></div>
                  <div class="level-mark"></div>
                </div>
                <div class="money-fill" id="fuel-pj" style="height:0%">
                  <div class="coins-layer"></div>
                  <div class="bills-layer">
                    <div class="bill"></div>
                    <div class="bill"></div>
                    <div class="bill"></div>
                    <div class="bill"></div>
                  </div>
                  <div class="money-surface"></div>
                  <div class="money-shine"></div>
                  <div class="money-glow"></div>
                </div>
              </div>
            </div>
          </div>

          <div class="status-badge status-danger" id="status-pj">‚Äî</div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const themes = ['royal','gold','emerald','sunset','ocean'];

    function brMoney(n){
      if(isNaN(n) || n === Infinity || n === -Infinity) return 'R$ 0';
      return n.toLocaleString('pt-BR',{style:'currency',currency:'BRL'});
    }
    function pct(n){ return `${(Math.max(0, n)).toFixed(1)}%`; }

    function setStatus(el, p){
      el.classList.remove('status-success','status-warning','status-danger');
      if(p >= 100) el.classList.add('status-success'), el.textContent = 'Meta batida!';
      else if(p >= 80) el.classList.add('status-warning'), el.textContent = 'Quase l√°';
      else el.classList.add('status-danger'), el.textContent = 'Aten√ß√£o';
    }

    function clampPercent(n){ return Math.max(0, Math.min(1000, n)); }

    function updateDashboard(){
      // PF
      const metaPF = parseFloat(document.getElementById('meta-pf').value)||0;
      const cons  = parseFloat(document.getElementById('realizado-consignado').value)||0;
      const ncons = parseFloat(document.getElementById('realizado-nao-consignado').value)||0;
      const realPF = cons + ncons;
      const pPF = metaPF>0 ? clampPercent((realPF/metaPF)*100) : 0;

      document.getElementById('meta-display-pf').textContent = brMoney(metaPF);
      document.getElementById('realizado-total-pf').textContent = brMoney(realPF);
      document.getElementById('breakdown-consignado').textContent = brMoney(cons);
      document.getElementById('breakdown-nao-consignado').textContent = brMoney(ncons);

      const progPF = document.getElementById('progress-pf');
      progPF.style.width = Math.min(pPF,100)+'%';
      document.getElementById('progress-text-pf').textContent = pct(pPF);
      document.getElementById('chip-value-pf').textContent = pct(pPF);
      document.getElementById('badge-pf').innerHTML = `${(pPF).toFixed(0)}%<small>Ating.</small>`;
      
      document.getElementById('fuel-pf').style.height = Math.min(pPF,100)+'%';
      
      setStatus(document.getElementById('status-pf'), pPF);

      // PJ
      const metaPJ = parseFloat(document.getElementById('meta-pj').value)||0;
      const giro   = parseFloat(document.getElementById('desembolso-giro').value)||0;
      const rec    = parseFloat(document.getElementById('desembolso-recebiveis').value)||0;
      const realPJ = giro + rec;
      const pPJ = metaPJ>0 ? clampPercent((realPJ/metaPJ)*100) : 0;

      document.getElementById('meta-display-pj').textContent = brMoney(metaPJ);
      document.getElementById('realizado-total-pj').textContent = brMoney(realPJ);
      document.getElementById('breakdown-giro').textContent = brMoney(giro);
      document.getElementById('breakdown-recebiveis').textContent = brMoney(rec);

      const progPJ = document.getElementById('progress-pj');
      progPJ.style.width = Math.min(pPJ,100)+'%';
      document.getElementById('progress-text-pj').textContent = pct(pPJ);
      document.getElementById('chip-value-pj').textContent = pct(pPJ);
      document.getElementById('badge-pj').innerHTML = `${(pPJ).toFixed(0)}%<small>Ating.</small>`;
      
      document.getElementById('fuel-pj').style.height = Math.min(pPJ,100)+'%';
      
      setStatus(document.getElementById('status-pj'), pPJ);
    }

    function stripTheme(el){ themes.forEach(t=>el.classList.remove(t)); }

    function changePalette(theme){
      document.querySelectorAll('.palette-btn').forEach(b=>b.classList.remove('active'));
      const btn = Array.from(document.querySelectorAll('.palette-btn')).find(b=>b.className.includes(`palette-${theme}`));
      if(btn) btn.classList.add('active');

      document.querySelectorAll('.card').forEach(card=>{ stripTheme(card); card.classList.add(theme); });
      document.querySelectorAll('.progress-bar').forEach(pb=>{ stripTheme(pb); pb.classList.add(theme); });

      const bgMap = {
        royal:['#1e3c72','#2a5298','#7e22ce'],
        gold:['#9a5b00','#d69200','#ffd200'],
        emerald:['#0f766e','#16a34a','#38ef7d'],
        sunset:['#b83280','#ff7e5f','#fee140'],
        ocean:['#102a43','#1f3b73','#00c6ff']
      };
      const [a,b,c] = bgMap[theme]||bgMap.royal;
      document.documentElement.style.setProperty('--bg1',a);
      document.documentElement.style.setProperty('--bg2',b);
      document.documentElement.style.setProperty('--bg3',c);
    }

    async function exportCard(cardId, fileName){
      const node = document.getElementById(cardId);
      const button = node.querySelector('.export-btn');
      const badge = node.querySelector('.percent-badge');
      
      // Ocultar bot√£o e badge antes de capturar
      button.style.display = 'none';
      badge.style.display = 'none';
      
      const canvas = await html2canvas(node,{scale:2,backgroundColor:null,useCORS:true});
      
      // Mostrar bot√£o e badge novamente
      button.style.display = 'block';
      badge.style.display = 'flex';
      
      const url = canvas.toDataURL('image/png');
      const a = document.createElement('a');
      a.href = url; a.download = `${fileName}.png`; a.click();
    }

    changePalette('royal');
    updateDashboard();
    setTimeout(updateDashboard, 200);
  </script>
</body>
</html>